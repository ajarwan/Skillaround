<section class="page-section listing-section" [ngClass]="{'hideMap':!MapVisible}">
  <!--Search Controls-->
  <div class="sortingWrapper">
    <ul class="sortFeildList">
      <!--Date Range-->
      <li>
        <input [attr.placeholder]="resources.Date" type="text" class="form-control filter-border" bsDaterangepicker #dpr="bsDaterangepicker"
               [(ngModel)]="Criteria.DateRange"
               [bsConfig]="DataStore.get('dbConfig')"
               [placement]="environment.Lang == 'ar' ? 'left':'right'" (ngModelChange)="OnFilterApply(FilterType.Date)">
      </li>
      <!--Category-->
      <li>
        <ng-template #CategorisTemplate>
          <ul class="popover-list">
            <li *ngFor="let Cat of Categories" class="popover-list-item"
                [ngClass]="{'item-selected':Cat.Id == Criteria.Category?.Id}"
                (appClick)="SetSelectedCategory(Cat)">
              <span>
                <i class="margin-5 {{Cat.IconClass}}" aria-hidden="true"></i>
                {{localizeData(Cat.TitleAr,Cat.TitleEn)}}
              </span>
            </li>
            <li class="popover-list-item no-hover popover-list-action">
              <button class="btn btn-outline-secondary" (appClick)="OnFilterClear(FilterType.Category)" [appDisabled]="!Criteria.Category" style="margin-left:2px;margin-right:2px">{{resources.Clear}}</button>
              <button class="btn btn-outline-dark float-right"
                      (appClick)="OnFilterApply(FilterType.Category)">
                {{resources.Apply}}
              </button>
            </li>
          </ul>
        </ng-template>
        <div class="dropdown priceRangeDropDown"
             [popover]="CategorisTemplate" [outsideClick]="true" container="body" placement="bottom" #popCat="bs-popover">
          <input type="button" class="form-control filter-price filter-border" [attr.placeholder]="Criteria.Category ? localizeData(Criteria.Category.TitleAr,Criteria.Category.TitleEn) :  resources.Category" [value]="Criteria.Category ? localizeData(Criteria.Category.TitleAr,Criteria.Category.TitleEn) :  resources.Category">
          <span class="priceRangeDropDownIcon" id="priceRangeDropDownIcon">
            <i class="icon icon-angle-down"></i>
          </span>
        </div>
      </li>
      <!--Price-->
      <li>
        <ng-template #PriceTemplate>
          <div class="popover-list">
            <div class="popover-list-item no-hover">
              <label for="price">{{resources.Price}}:</label>
            </div>
            <div style="width:90%;margin:auto">
              <div id="mySlider" class="popover-list-item no-hover"></div>
            </div>
          </div>
          <div class="popover-list-item no-hover popover-list-action" style="margin-top:15px">
            <button class="btn btn-outline-dark float-right" (appClick)="OnFilterApply(FilterType.Price)">{{resources.Apply}}</button>
          </div>

        </ng-template>
        <div class="dropdown priceRangeDropDown" (onShown)="OnPriceShown()"
             [popover]="PriceTemplate" [outsideClick]="true" container="body" placement="bottom" #popPice="bs-popover">
          <input type="button" class="form-control filter-price filter-border" [attr.placeholder]="resources.Price" id="price" [value]="resources.Price">
          <span class="priceRangeDropDownIcon" id="priceRangeDropDownIcon">
            <i class="icon icon-angle-down"></i>
          </span>
        </div>
      </li>
      <!--Age-->
      <li>
        <ng-template #AgeTemplate>
          <ul class="popover-list">
            <li *ngFor="let Age of Ages" class="popover-list-item"
                [ngClass]="{'item-selected':Age.Id == Criteria.Age?.Id}"
                (appClick)="SetSelectedAge(Age)">
              <span>{{Age.Title}}</span>
            </li>
            <li class="popover-list-item no-hover popover-list-action">
              <button class="btn btn-outline-secondary" (appClick)="OnFilterClear(FilterType.Age)" [appDisabled]="!Criteria.Age" style="margin-left:2px;margin-right:2px">{{resources.Clear}}</button>
              <button class="btn btn-outline-dark float-right" (appClick)="OnFilterApply(FilterType.Age)">{{resources.Apply}}</button>
            </li>
          </ul>
        </ng-template>
        <div class="dropdown priceRangeDropDown"
             [popover]="AgeTemplate" [outsideClick]="true" container="body" placement="bottom" #popAge="bs-popover">
          <input type="button" class="form-control filter-price filter-border" [attr.placeholder]="Criteria.Age ? Criteria.Age.Title  : resources.Age" [value]="Criteria.Age ? Criteria.Age.Title  : resources.Age">
          <span class="priceRangeDropDownIcon" id="priceRangeDropDownIcon">
            <i class="icon icon-angle-down"></i>
          </span>
        </div>
      </li>
      <!--Transportation-->
      <li>
        <ng-template #TransTemplate>
          <ul class="popover-list">
            <li class="popover-list-item" (appClick)="SetSelectedTrans( AppEnums.TransportationFilter.All)">
              <i class="fa" [ngClass]="{'fa-check-square-o' : Criteria.TransportationStatus == AppEnums.TransportationFilter.All ,
                 'fa-square-o':Criteria.TransportationStatus != AppEnums.TransportationFilter.All}"></i> {{resources.All}}
            </li>
            <li class="popover-list-item" (appClick)="SetSelectedTrans( AppEnums.TransportationFilter.Available)">
              <i class="fa" [ngClass]="{'fa-check-square-o' : Criteria.TransportationStatus == AppEnums.TransportationFilter.Available,
                 'fa-square-o':Criteria.TransportationStatus != AppEnums.TransportationFilter.Available}"></i> {{resources.Yes}}
            </li>
            <li class="popover-list-item" (appClick)="SetSelectedTrans( AppEnums.TransportationFilter.NotAvailable)">
              <i class="fa" [ngClass]="{'fa-check-square-o' : Criteria.TransportationStatus == AppEnums.TransportationFilter.NotAvailable,
                 'fa-square-o': Criteria.TransportationStatus != AppEnums.TransportationFilter.NotAvailable}"></i> {{resources.No}}
            </li>
            <li class="popover-list-item no-hover popover-list-action">
              <button class="btn btn-outline-dark float-right" (appClick)="OnFilterApply(FilterType.Transportation)" style="margin-bottom:5px">{{resources.Apply}}</button>
            </li>
          </ul>
        </ng-template>
        <div class="dropdown priceRangeDropDown"
             [popover]="TransTemplate" [outsideClick]="true" container="body" placement="bottom" #popTrans="bs-popover">
          <input type="button" class="form-control filter-price filter-border" [attr.placeholder]="GetTransLabel" [value]="GetTransLabel" style="min-width:260px">
          <span class="priceRangeDropDownIcon" id="priceRangeDropDownIcon">
            <i class="icon icon-angle-down"></i>
          </span>
        </div>
      </li>
      <!--Show/Hide Map-->
      <li>
        <div class="showMapSwitchWrap">
          <span class="showMapLebl">{{resources.ShowMap}}</span>
          <div id="shSwitch">
            <div id="bsh-shSwitch">
              <input (appClick)="ToggleMap()" class="tgl-sw tgl-sw-light" [ngClass]="{'tgl-sw-light-checked' : MapVisible , 'tgl-sw-active' : MapVisible}" id="light-shSwitch" type="checkbox">
              <label class="btn-switch" for="light-shSwitch" id="sw-light-320473" data-state="false"></label>
            </div>
            <div style="clear:both"></div>
          </div>
        </div>
      </li>
    </ul>
  </div>

  <div class="listing-map-container">
    <!--Results-->
    <div class="col_left">
      <a class="activity_Block link-div no-hover" *ngFor="let Act of Activities" [routerLink]="'details/' + Act.Id">
        <div class="img_container">
          <a class="img_link">
            <div class="imgBg">
              <img class="img" [src]="Act.Thumbnail?.File" />
            </div>
          </a>
        </div>
        <div class="desc_wrap">
          <div class="info-left">
            <h4>{{Act.Title}}</h4>
            <p class="place">{{Act.LocationName}}</p>
            <div class="details">
              {{Act.Description}}
            </div>
          </div>
          <div class="info-right">
            <span class="rating" *ngIf="Act.TotalReviews">
              <i class="icon icon-star"></i> {{Act.AvgRate}}
            </span>
            <span class="price">{{Act.Price}}$</span>
          </div>
        </div>
      </a>
    </div>

    <!--Map-->
    <div class="col_right">
      <div class="map" id="map"></div>
    </div>
  </div>
</section>

